<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Baylor JS Insertion</title>
		<script>
			var styles = `
                body{background: #C5DAE8 !important;}
                input{background:white !important; padding: 5px !important; border-radius: 3px !important;}
                .print-center-container{ margin:auto !important;}
                .print-center-container tbody {background: white;}
                .print-center-container tbody tr td.top_links p{background: #C5DAE8 !important; }
                td.main-header h1{margin: 50px 0px 0px 574px !important; border-radius: 0 15px 0 0;}
                td.main-header{border-radius: 30px 0 0 0 !important; background-position-y: -5px;}
                #docLibItem, #opc_content , div#quote > td {background: white;}
                .print-center-container:first-of-type tbody:first-of-type tr:last-of-type td:first div:first-of-type {border-left: 55px solid #0076D4 !important;}
                .print-center-container:first tbody tr[3] {background: #C5DAE8 !important;}
                .sidebar-nav gray{margin-top: -4px !important;}
                .sidebar-right > tr td[2] {margin-top: -4px !important;}
                .description table tbody tr td {background: white !important;}
                table.sidebar-products tbody tr td {background: white !important;}
                div#quote td {background: white !important;}
                .print-center-container:first-of-type tbody:first-of-type tr:first-of-type td:first-of-type .user.product_image.padding-box + table tbody tr td {background: white !important;}
                table.sidebar-products tbody {background: #FEB53D !important;}
                #ELEMENT_1621112, #ELEMENT_1621114, #ELEMENT_1621115, #ELEMENT_1621116, #ELEMENT_1621117, #ELEMENT_1621118, #ELEMENT_1621106, #ELEMENT_1621089, #ELEMENT_1621111 { display: none}
                #ELEMENT_297318 div.productfloat.fullsize.form_builder_container {float: unset !important; margin: 50px 20px 20px !important;}
                #ELEMENT_1226753 { height: 60px;}
                #ELEMENT_744853 h3 {width: unset}
                h3:has(#L_WouldYouLikeABackerOnYourCards) { width: 500px !important; margin-bottom: 10px !important;}
                #OPTION_4057484 { margin-bottom: 0 !important; padding-bottom: 0 !important;}
                #ELEMENT_1621108 div { margin-bottom: 0 !important; padding-bottom !important; margin-top: 10px !important;}
                input[type="text"] {background-color: rgb(241, 241, 241)!important; border: none !important; padding: 4px !important; margin: 5px; padding-left: 15px !important; font-size: 15px;}
                input[type="text"]:hover {outline: none !important; border-color: none !important}
                input[type="text"]:active {outline: none !important; border-color: none !important}
                input[type="text"]:visited {outline: none !important; border-color: none !important}
                input[type="text"]:focus-visited {outline: none !important; border-color: none !important};
                input[type="text"]:focus-within {outline: none !important; border-color: none !important}
                input[type="text"]:focus {border: none !important; box-shadow: 1px 0px 5px 1px rgb(226, 226, 226) !important;}
                textarea {background-color: rgb(241, 241, 241) !important; background: rgb(241, 241, 241) !important; border: none;padding: 7px; margin: 5px; padding: 15px !important; font-size: 15px; border-radius: 7px;}
                table.sidebar-products tbody tr td { background-color: #FCB746 !important; border-radius: 10px !important;}
                #productscontainer li h3 span.subtitle { display: none !important;}
                #ELEMENT_276937 {margin-top: 20px !important;}
                #ELEMENT_1621089 {display: none !important;}
                #ELEMENT_1621118, #ELEMENT_1621117, #ELEMENT_1621116 {border-top: none !important;}
                #ELEMENT_1621111 h3 {width: 290px !important;}
                * {transition: all 0.3s ease-in-out !important;}
                .sidebar-nav {margin-bottom: 10px !important; border-radius: 10px !important; border-bottom: none;} 
                .sidebar-right {padding: 10px !important;}
                #ELEMENT_276937, #ELEMENT_1621110, #ELEMENT_348464, #ELEMENT_347929 {margin-bottom: 20px !important;}
                .custom-warning {white-space: nowrap !important; margin: 5px !important; color: red !important; }
                .custom-button {background-color: #0076D4 !important; color: white !important; border: none !important; border-radius: 0 999px 999px 0 !important; height: 25px !important; padding: 0px 10px 0 5px !important; margin: 0px !important; font-size: 15px !important; cursor: pointer !important;}
                #productscontainer li .productfloat.fullsize input[type=text], #productscontainer li .productfloat textarea { width: 74%; margin-right: 0 !important; margin-bottom: 5px;}
                .custom-Preview {color: gray; margin: 5px !important; font-size: 17px !important}
                `;

			var JS = document.createElement("script");
			JS.innerText = `
            var styleSheet = document.createElement("style");
            styleSheet.innerText = styles;
            document.head.appendChild(styleSheet);
            console.log("this script functions correctly 3");
            var leftTd = document.querySelector('td[rowspan="4"][width="35"]');
            var topTdLeft = document.querySelector('td[rowspan="0"][width="35"]');
            var topTdRight = document.querySelector('td[colspan="3"][class="top_links"]');
            leftTd.setAttribute("rowspan", 0);
            leftTd.style.backgroundColor = "#C5DAE8";
            topTdRight.style.backgroundColor = "#C5DAE8";

            const backSelect = document.getElementById("E_PleaseSelectYourBusinessCardBackerbswh");
            const backPhoneCont = document.getElementById("ELEMENT_1621111");
            const backPhoneInput = document.getElementById("E_PhoneNumberDisplayedonBackerBacksideofthecard");
            const backCont = document.getElementById("ELEMENT_1226753");
            const backerNo = document.getElementById("E_WouldYouLikeABackerOnYourCards0");
            const backerYes = document.getElementById("E_WouldYouLikeABackerOnYourCards1");
            backerNo.checked = true;

            function removeClassFromDescendants(element, className) {
            element.classList.remove(className);
            const children = element.children;
            for (let i = 0; i < children.length; i++) {
            removeClassFromDescendants(children[i], className);
            }
            };

            const Days1 = document.getElementById("ELEMENT_1621112");
            const Days2 = document.getElementById("ELEMENT_1621114");
            const Days3 = document.getElementById("ELEMENT_1621115");
            const Hours1 = document.getElementById("ELEMENT_1621116");
            const Hours2 = document.getElementById("ELEMENT_1621117");
            const Hours3 = document.getElementById("ELEMENT_1621118");
            const HoursBreak = document.getElementById("ELEMENT_1621106");
            HoursBreak.style.display = "none";
            Days1.style.display = "none";
            Hours1.style.display = "none";
            Days2.style.display = "none";
            Hours2.style.display = "none";
            Days3.style.display = "none";
            Hours3.style.display = "none";

            const Days1Label = document.getElementById('L_OfficeHoursDays1');
            const Days2Label = document.getElementById('L_OfficeHoursDays2');
            const Days3Label = document.getElementById('L_OfficeHoursDays3');
            const Hours1Label = document.getElementById('L_OfficeHoursHours1');
            const Hours2Label = document.getElementById('L_OfficeHoursHours2');
            const Hours3Label = document.getElementById('L_OfficeHoursHours3');
            const BackerSelectLabel = document.querySelector('span#L_PleaseSelectYourBusinessCardBackerbswh');
            const BackerPhoneLabel = document.querySelector('span#L_PhoneNumberDisplayedonBackerBacksideofthecard');
            BackerSelectLabel.textContent = "Select a Card-Backside";
            var ast = document.createElement("span");
            var astItems = [ Days1Label, Hours1Label, Days2Label, Hours2Label, Days3Label, Hours3Label, BackerSelectLabel, BackerPhoneLabel ];
            ast.innerText = "*";
            ast.setAttribute("class", "warning");

            console.log("made it up to the asterixs");
            var addAsterixs = (items) => {
            items.forEach(item => {
            var clone = ast.cloneNode(true);
            item.parentNode.insertBefore(clone,item);
            const container = item.parentNode.parentNode.parentNode ;
            console.log(item);
            container.style.width = "50%";
            });
            };
            addAsterixs(astItems);
            backCont.style.width = "auto";
            backPhoneCont.style.width = "auto";

            console.log("made it up to the function");
            backSelect.addEventListener("change", () => {
                console.log("fired the function");
            HoursBreak.style.display = "block";
            if (backSelect.selectedIndex == 2) {
                   console.log("2 selected");
            Days1.style.display = "block";
            Hours1.style.display = "block";
            Days1.setAttribute("required", "required");
            Hours1.setAttribute("required", "required");
            Days2.style.display = "none";
            Hours2.style.display = "none";
            Days3.style.display = "none";
            Hours3.style.display = "none";
            Days2.removeAttribute("required");
            Hours2.removeAttribute("required");
            Days3.removeAttribute("required");
            Hours3.removeAttribute("required");
            } else if (backSelect.selectedIndex == 3) {
                 console.log("3 selected");
            Days1.style.display = "block";
            Hours1.style.display = "block";
            Days2.style.display = "block";
            Hours2.style.display = "block";
            Days1.setAttribute("required", "required");
            Hours1.setAttribute("required", "required");
            Days2.setAttribute("required", "required");
            Hours2.setAttribute("required", "required");
            Days3.style.display = "none";
            Hours3.style.display = "none";
            Days3.removeAttribute("required");
            Hours3.removeAttribute("required");
            } else if (backSelect.selectedIndex == 4) {
                 console.log("4 selected");
            Days1.style.display = "block";
            Hours1.style.display = "block";
            Days2.style.display = "block";
            Hours2.style.display = "block";
            Days3.style.display = "block";
            Hours3.style.display = "block";
            Days1.setAttribute("required", "required");
            Hours1.setAttribute("required", "required");
            Days2.setAttribute("required", "required");
            Hours2.setAttribute("required", "required");
            Days3.setAttribute("required", "required");
            Hours3.setAttribute("required", "required");
            } else {
                 console.log("else selected");
            Days1.style.display = "none";
            Hours1.style.display = "none";
            Days2.style.display = "none";
            Hours2.style.display = "none";
            Days3.style.display = "none";
            Hours3.style.display = "none";
            HoursBreak.style.display = "none";
            Days1.removeAttribute("required");
            Hours1.removeAttribute("required");
            Days2.removeAttribute("required");
            Hours2.removeAttribute("required");
            Days3.removeAttribute("required");
            Hours3.removeAttribute("required");
            }
            });
            const Days = [
            [Days3, Hours3],
            [Days2, Hours2],
            [Days1, Hours1],
            ];
            const containingDiv = document.createElement("div");
            const largeDiv = document.createElement("div");
            largeDiv.style.display = "flex";
            largeDiv.style.flexDirection = "column";
            largeDiv.style.alignItems = "center";
            largeDiv.style.justifyContent = "center";
            largeDiv.style.width = "100%";
            largeDiv.style.margin = "0 auto";
            largeDiv.style.padding = "0 0 0 40px";
            largeDiv.id = "largeDiv";
            const elementToInsertAfter = document.getElementById("ELEMENT_1621089");

            Days.forEach((pair) => {
            const count = Days.indexOf(pair);
            const group = containingDiv.cloneNode(true);
            group.id = "containingDiv" + (count + 1);
            group.setAttribute("class", "row-group");
            group.style.display = "flex";
            group.style.flexDirection = "row";
            group.style.alignItems = "center";
            group.style.justifyContent = "center";
            group.style.width = "100%";
            group.style.margin = "0 auto";
            group.style.padding = "0 20px";
            group.style.boxSizing = "border-box";
            pair.forEach((item) => {
            group.appendChild(item);
            item.style.borderTop = "none !important";
            });
            largeDiv.appendChild(group);
            });
            elementToInsertAfter.parentNode.insertBefore(largeDiv, elementToInsertAfter.nextSibling);

            backerYes.addEventListener("change", () => {
                if (backerYes.checked) {
                    backCont.style.display = "block";
                    backPhoneCont.style.display = "block";
                    backSelect.setAttribute("required", "required");
                    backPhoneInput.setAttribute("required", "required");
                } else {
                    backCont.style.display = "none";
                    backPhoneCont.style.display = "none";
                    backSelect.removeAttribute("required");
                    backPhoneInput.removeAttribute("required");
                    const LargeDiv = document.querySelector("div#largeDiv") ?  document.querySelector("div#largeDiv") : null;
                    console.log("made it up to end of the else");
                }
            });
            backerNo.addEventListener("click", () => {
                if (backerNo.checked) {
                    Days1.style.display = "none";
                    Hours1.style.display = "none";
                    Days2.style.display = "none";
                    Hours2.style.display = "none";
                    Days3.style.display = "none";
                    Hours3.style.display = "none";
                    backPhoneCont.style.display = "none";
                } 
            });

            const nameCont = document.querySelector('li#ELEMENT_1622166 div.productfloat.fullsize.form_builder_container');
            const nameInput = document.querySelector('li#ELEMENT_1622166 div.productfloat.fullsize.form_builder_container input#E_Name');
            const credCont = document.querySelector('li#ELEMENT_1621123 div.productfloat.fullsize.form_builder_container');
            const credInput = document.querySelector('#E_Credentials');
            const nameAndCred = document.querySelector('textarea#E_NameandCredentials');

            const nameFixButton = document.createElement("button");
            nameFixButton.classList.add("custom-button");
            nameFixButton.textContent = "Format";
            nameFixButton.setAttribute("type", "button");
            nameCont.appendChild(nameFixButton);
            const nameInputAlert = document.createElement("span");
            nameInputAlert.classList.add("custom-warning");
            nameInputAlert.textContent = "Invalid Name Formatting. Please click 'Format' to fix.";
            nameCont.appendChild(nameInputAlert);

            namePreview = document.createElement("label");
            namePreviewVal = document.createElement("span");
            namePreview.classList.add("custom-Preview");
            namePreview.textContent = "Preview: ";
            namePreviewVal.textContent = "...";
            nameCont.prepend(namePreview);
            namePreview.appendChild(namePreviewVal);

            credPreview = document.createElement("label");
            credPreviewVal = document.createElement("span");
            credPreview.classList.add("custom-Preview");
            credPreview.textContent = "Preview: ";
            credPreviewVal.textContent = "...";
            credCont.prepend(credPreview);
            credPreview.appendChild(credPreviewVal);

            nameInput.addEventListener("keyup", (e) => {nameAndCred.value = e.target.value + ", " + credInput.value; namePreviewVal.textContent = e.target.value;});
            credInput.addEventListener("keyup", (e) => {nameAndCred.value = nameInput.value + ", " + e.target.value; credPreviewVal.textContent = e.target.value;});
            `;
			document.body.appendChild(JS);
		</script>
	</head>
	<body></body>
</html>

//Line 70: look at what exactly is being shown at any point. BackerSelectLabel.textContent = "Please Select Your Business Card Backer";
